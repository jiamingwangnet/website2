<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden;
            display:flex;justify-content:center;align-items:center;
            height: 100vh;
            background-color: #fff;
        }

        .board {
            width: 50%;
            margin: 0;
            padding: 0;
        }

        .square {
            width: 14vw;
            aspect-ratio : 1 / 1;
            border: 2px solid black;
            text-align: center;
            margin: 1%;
            display:flex;justify-content:center;align-items:center;
            font-weight: bold;
        }

        .container {
            display: flex;
            width: 100%;
            margin: 0;
        }

        @media only screen and (max-width: 800px) {
            .board {
                width: 80%;
                margin: 0;
                padding: 0;
            }

            .square {
                width: 40vw;
                aspect-ratio : 1 / 1;
                border: 2px solid black;
                text-align: center;
                margin: 1%;
            }     
        }
    </style>
</head>
<body>
    <div class="board">
        <div  class="container">
            <div class="square" id="s0_0"></div>
            <div class="square" id="s0_1"></div>
            <div class="square" id="s0_2"></div>
        </div>
        <div  class="container">
            <div class="square" id="s1_0"></div>
            <div class="square" id="s1_1"></div>
            <div class="square" id="s1_2"></div>
        </div>
        <div  class="container">
            <div class="square" id="s2_0"></div>
            <div class="square" id="s2_1"></div>
            <div class="square" id="s2_2"></div>
        </div>
    </div>
    <h2 id="winner"></h2>

    <script>
        const board = [
            ["", "", ""],
            ["", "", ""],
            ["", "", ""],
        ];
        let currentPlayer = "X";
        let winner = null;
        const squares = document.querySelectorAll(".square");
        
        function put(x, y)
        {
            if(board[y][x] != '') return;
            board[y][x] = currentPlayer;
            currentPlayer = currentPlayer == "X" ? "O" : "X";
        }

        function draw()
        {
            for(let y = 0; y < 3; y++)
            {
                for(let x = 0; x < 3; x++)
                {
                    const square = document.querySelector(`#s${y}_${x}`);
                    square.innerHTML = board[y][x];
                }
            }
        }

        function checkwinner()
        {
            // check rows
            for(let y = 0; y < 3; y++)
            {
                if(board[y][0] == "") continue;
                if(board[y][0] == board[y][1] && board[y][1] == board[y][2])
                {
                    winner = currentPlayer == "X" ? "O" : "X";
                    return;
                }
            }

            // check columns
            for(let x = 0; x < 3; x++)
            {
                if(board[0][x] == "") continue;
                if(board[0][x] == board[1][x] && board[1][x] == board[2][x])
                {
                    winner = currentPlayer == "X" ? "O" : "X";
                    return;
                }
            }

            // check diagonals

            if(board[0][0] == board[1][1] && board[1][1] == board[2][2] && board[0][0] != '')
            {
                winner = currentPlayer == "X" ? "O" : "X";
                return;
            }

            if(board[0][2] == board[1][1] && board[1][1] == board[2][0] && board[0][2] != '')
            {
                winner = currentPlayer == "X" ? "O" : "X";
                return;
            }
        }

        for(const square of squares)
        {
            square.addEventListener("click", e => {
                if(winner) return;
                put(parseInt(square.id[3]), parseInt(square.id[1])); 
                draw();
                checkwinner();  
                if(winner) document.querySelector("#winner").innerHTML = `${winner} has won!!`;       
            });
        }
    </script>
</body>
</html>